{
  "articles": [
    {
      "path": "about.html",
      "title": "Description about the Portfolio",
      "description": "Hotel booking cancellation prediction is a crucial task for hotel management to optimize their operations, revenue, and customer satisfaction. By accurately predicting which bookings are likely to be canceled, hotels can take proactive measures to minimize the impact, such as overbooking rooms, offering incentives to retain customers, or adjusting pricing strategies.\nThe dataset provides valuable insights into various factors that may influence booking cancellations, such as lead time, arrival date, booking channel, customer demographics, and special requests. By analyzing this data and building predictive models, we aim to identify patterns and relationships that can help predict whether a booking is likely to be canceled.",
      "author": [],
      "contents": "\n\n\n\n",
      "last_modified": "2024-04-21T15:25:48-04:00"
    },
    {
      "path": "index.html",
      "title": "STA 631 Statistical Modelling And Regression Portfolio",
      "author": [],
      "contents": "\n\n\nknitr::opts_chunk$set(echo = TRUE)\n\n\nLoading the libraries\n\n\n# load the libraries\nlibrary(tidyverse)\nlibrary(dplyr)\nlibrary(corrplot)\nlibrary(caret)\nlibrary(Metrics)\nlibrary(rsq)\n\n\nLoad the Dataset\n\n\n# load the dataset\nhotel_data <- read_csv(\"hotel_bookings.csv\")\n\n\nSummary of the dataset\n\n\n# overview of the dataset \n\nglimpse(hotel_data)\n\nRows: 119,390\nColumns: 32\n$ hotel                          <chr> \"Resort Hotel\", \"Resort Hotel…\n$ is_canceled                    <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 1, 1,…\n$ lead_time                      <dbl> 342, 737, 7, 13, 14, 14, 0, 9…\n$ arrival_date_year              <dbl> 2015, 2015, 2015, 2015, 2015,…\n$ arrival_date_month             <chr> \"July\", \"July\", \"July\", \"July…\n$ arrival_date_week_number       <dbl> 27, 27, 27, 27, 27, 27, 27, 2…\n$ arrival_date_day_of_month      <dbl> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,…\n$ stays_in_weekend_nights        <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…\n$ stays_in_week_nights           <dbl> 0, 0, 1, 1, 2, 2, 2, 2, 3, 3,…\n$ adults                         <dbl> 2, 2, 1, 1, 2, 2, 2, 2, 2, 2,…\n$ children                       <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…\n$ babies                         <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…\n$ meal                           <chr> \"BB\", \"BB\", \"BB\", \"BB\", \"BB\",…\n$ country                        <chr> \"PRT\", \"PRT\", \"GBR\", \"GBR\", \"…\n$ market_segment                 <chr> \"Direct\", \"Direct\", \"Direct\",…\n$ distribution_channel           <chr> \"Direct\", \"Direct\", \"Direct\",…\n$ is_repeated_guest              <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…\n$ previous_cancellations         <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…\n$ previous_bookings_not_canceled <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…\n$ reserved_room_type             <chr> \"C\", \"C\", \"A\", \"A\", \"A\", \"A\",…\n$ assigned_room_type             <chr> \"C\", \"C\", \"C\", \"A\", \"A\", \"A\",…\n$ booking_changes                <dbl> 3, 4, 0, 0, 0, 0, 0, 0, 0, 0,…\n$ deposit_type                   <chr> \"No Deposit\", \"No Deposit\", \"…\n$ agent                          <chr> \"NULL\", \"NULL\", \"NULL\", \"304\"…\n$ company                        <chr> \"NULL\", \"NULL\", \"NULL\", \"NULL…\n$ days_in_waiting_list           <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…\n$ customer_type                  <chr> \"Transient\", \"Transient\", \"Tr…\n$ adr                            <dbl> 0.00, 0.00, 75.00, 75.00, 98.…\n$ required_car_parking_spaces    <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…\n$ total_of_special_requests      <dbl> 0, 0, 0, 0, 1, 1, 0, 1, 1, 0,…\n$ reservation_status             <chr> \"Check-Out\", \"Check-Out\", \"Ch…\n$ reservation_status_date        <date> 2015-07-01, 2015-07-01, 2015…\n\nRemoving missing values columns from the dataset\n\n\nnull_counts <- colSums(is.na(hotel_data))\nnull_counts\n\n                         hotel                    is_canceled \n                             0                              0 \n                     lead_time              arrival_date_year \n                             0                              0 \n            arrival_date_month       arrival_date_week_number \n                             0                              0 \n     arrival_date_day_of_month        stays_in_weekend_nights \n                             0                              0 \n          stays_in_week_nights                         adults \n                             0                              0 \n                      children                         babies \n                             4                              0 \n                          meal                        country \n                             0                              0 \n                market_segment           distribution_channel \n                             0                              0 \n             is_repeated_guest         previous_cancellations \n                             0                              0 \nprevious_bookings_not_canceled             reserved_room_type \n                             0                              0 \n            assigned_room_type                booking_changes \n                             0                              0 \n                  deposit_type                          agent \n                             0                              0 \n                       company           days_in_waiting_list \n                             0                              0 \n                 customer_type                            adr \n                             0                              0 \n   required_car_parking_spaces      total_of_special_requests \n                             0                              0 \n            reservation_status        reservation_status_date \n                             0                              0 \n\nHere we can see the in children column 4 observations are missing, so we will remove the null value rows to cleanup the dataset\n\n\nhotel_clean_data <- na.omit(hotel_data)\n\nskimr::skim(hotel_clean_data)\n\nTable 1: Data summary\nName\nhotel_clean_data\nNumber of rows\n119386\nNumber of columns\n32\n_______________________\n\nColumn type frequency:\n\ncharacter\n13\nDate\n1\nnumeric\n18\n________________________\n\nGroup variables\nNone\nVariable type: character\nskim_variable\nn_missing\ncomplete_rate\nmin\nmax\nempty\nn_unique\nwhitespace\nhotel\n0\n1\n10\n12\n0\n2\n0\narrival_date_month\n0\n1\n3\n9\n0\n12\n0\nmeal\n0\n1\n2\n9\n0\n5\n0\ncountry\n0\n1\n2\n4\n0\n178\n0\nmarket_segment\n0\n1\n6\n13\n0\n7\n0\ndistribution_channel\n0\n1\n3\n9\n0\n5\n0\nreserved_room_type\n0\n1\n1\n1\n0\n10\n0\nassigned_room_type\n0\n1\n1\n1\n0\n12\n0\ndeposit_type\n0\n1\n10\n10\n0\n3\n0\nagent\n0\n1\n1\n4\n0\n334\n0\ncompany\n0\n1\n1\n4\n0\n353\n0\ncustomer_type\n0\n1\n5\n15\n0\n4\n0\nreservation_status\n0\n1\n7\n9\n0\n3\n0\nVariable type: Date\nskim_variable\nn_missing\ncomplete_rate\nmin\nmax\nmedian\nn_unique\nreservation_status_date\n0\n1\n2014-10-17\n2017-09-14\n2016-08-07\n926\nVariable type: numeric\nskim_variable\nn_missing\ncomplete_rate\nmean\nsd\np0\np25\np50\np75\np100\nhist\nis_canceled\n0\n1\n0.37\n0.48\n0.00\n0.00\n0.00\n1\n1\n▇▁▁▁▅\nlead_time\n0\n1\n104.01\n106.86\n0.00\n18.00\n69.00\n160\n737\n▇▂▁▁▁\narrival_date_year\n0\n1\n2016.16\n0.71\n2015.00\n2016.00\n2016.00\n2017\n2017\n▃▁▇▁▆\narrival_date_week_number\n0\n1\n27.17\n13.61\n1.00\n16.00\n28.00\n38\n53\n▅▇▇▇▅\narrival_date_day_of_month\n0\n1\n15.80\n8.78\n1.00\n8.00\n16.00\n23\n31\n▇▇▇▇▆\nstays_in_weekend_nights\n0\n1\n0.93\n1.00\n0.00\n0.00\n1.00\n2\n19\n▇▁▁▁▁\nstays_in_week_nights\n0\n1\n2.50\n1.91\n0.00\n1.00\n2.00\n3\n50\n▇▁▁▁▁\nadults\n0\n1\n1.86\n0.58\n0.00\n2.00\n2.00\n2\n55\n▇▁▁▁▁\nchildren\n0\n1\n0.10\n0.40\n0.00\n0.00\n0.00\n0\n10\n▇▁▁▁▁\nbabies\n0\n1\n0.01\n0.10\n0.00\n0.00\n0.00\n0\n10\n▇▁▁▁▁\nis_repeated_guest\n0\n1\n0.03\n0.18\n0.00\n0.00\n0.00\n0\n1\n▇▁▁▁▁\nprevious_cancellations\n0\n1\n0.09\n0.84\n0.00\n0.00\n0.00\n0\n26\n▇▁▁▁▁\nprevious_bookings_not_canceled\n0\n1\n0.14\n1.50\n0.00\n0.00\n0.00\n0\n72\n▇▁▁▁▁\nbooking_changes\n0\n1\n0.22\n0.65\n0.00\n0.00\n0.00\n0\n21\n▇▁▁▁▁\ndays_in_waiting_list\n0\n1\n2.32\n17.60\n0.00\n0.00\n0.00\n0\n391\n▇▁▁▁▁\nadr\n0\n1\n101.83\n50.53\n-6.38\n69.29\n94.59\n126\n5400\n▇▁▁▁▁\nrequired_car_parking_spaces\n0\n1\n0.06\n0.25\n0.00\n0.00\n0.00\n0\n8\n▇▁▁▁▁\ntotal_of_special_requests\n0\n1\n0.57\n0.79\n0.00\n0.00\n0.00\n1\n5\n▇▁▁▁▁\n\nData Visualization\n1) What is the range of years covered by the dataset, including both the earliest and latest years?\n\n\n# let's find the years the data taken from \nyears_of_data <- unique(hotel_clean_data$arrival_date_year)\nprint(years_of_data)\n\n[1] 2015 2016 2017\n\nAns) The data is taken from 2015, 2016, 2017 approximately more than 1 lakh columns are recorded\n2) What is the total number of bookings canceled and the total number of bookings not canceled?\n\n\n# group by the  booking canceleation status \ngrp_by_canceled_hotel <- hotel_clean_data %>%\n  group_by(is_canceled) %>%\n  summarise(count = n())\n\ngrp_by_canceled_hotel\n\n# A tibble: 2 × 2\n  is_canceled count\n        <dbl> <int>\n1           0 75166\n2           1 44220\n\nAns) From the above table we can see that there are 75166 hotel bookings are not canceled and 44220 hotel bookings are canceled\n3) what percentage of bookings are canceled in the total bookings?\n\n\n# Calculate the total number of bookings\ntotal_bookings <- sum(grp_by_canceled_hotel$count)\n\n# Calculate the number of canceled bookings\ncanceled_bookings <- grp_by_canceled_hotel$count[grp_by_canceled_hotel$is_canceled == 1]\n\n# Calculate the percentage of bookings that are canceled overall\npercentage_canceled <- (sum(canceled_bookings) / total_bookings) * 100\n\n# Print the result\ncat(\"The percentage of bookings that are canceled overall is:\", percentage_canceled, \"%\\n\")\n\nThe percentage of bookings that are canceled overall is: 37.03952 %\n\n4) Distribution of Canceled and Not Canceled Bookings\n\n\n# Calculate the total number of bookings\ntotal_bookings <- sum(grp_by_canceled_hotel$count)\n\n# Calculate the percentage of each status type\npercentage <- round((grp_by_canceled_hotel$count / total_bookings) * 100, 2)\n\n# Create labels with both status type and percentage\nlabels <- paste(c( \"Not Canceled\",\"Canceled\"), \"(\", percentage, \"%)\", sep = \" \")\n\n# Define colors for each slice\ncolors <- c(\"green\", \"red\")  # You can customize the colors as needed\n\n# Plot the pie chart with labels and colors\npie(grp_by_canceled_hotel$count, labels = labels, col = colors,\n    main = \"Distribution of Canceled and Not Canceled Bookings\")\n\n\n\n5) Total Number of Bookings Canceled vs. Not Canceled\n\n\n# Create a ggplot object\nggplot(hotel_clean_data, aes(x = factor(is_canceled), fill = factor(is_canceled))) +\n  geom_bar() +\n  labs(title = \"Total Number of Bookings Canceled vs. Not Canceled\",\n       x = \"Cancellation Status\",\n       y = \"Total Number of Bookings\") +\n  scale_x_discrete(labels = c(\"Not Canceled\", \"Canceled\"))\n\n\n\n6) What are the combined totals of bookings that were canceled and not canceled, categorized by hotel type?\n\n\n# group by the hotel type and cancelation status  \ngrp_by_hotel_type <- hotel_clean_data %>%\n  group_by(hotel,is_canceled) %>%\n  summarise(count = n())\n\ngrp_by_hotel_type\n\n# A tibble: 4 × 3\n# Groups:   hotel [2]\n  hotel        is_canceled count\n  <chr>              <dbl> <int>\n1 City Hotel             0 46228\n2 City Hotel             1 33098\n3 Resort Hotel           0 28938\n4 Resort Hotel           1 11122\n\n7) Total Number of Bookings by Cancellation Status and Hotel Type\n\n\n# Create a ggplot object\nggplot(hotel_clean_data, aes(x = factor(is_canceled), fill = factor(hotel))) +\n  geom_bar(position = \"dodge\") +\n  labs(title = \"Total Number of Bookings by Cancellation Status and Hotel Type\",\n       x = \"Cancellation Status\",\n       y = \"Total Number of Bookings\") +\n  scale_x_discrete(labels = c(\"Not Canceled\", \"Canceled\"))\n\n\n\n8) What are the combined totals of bookings that were canceled and not canceled, categorized by year ?\n\n\n# group by the year and cancelation status \ngrp_by_year <- hotel_clean_data %>%\n  group_by(arrival_date_year,is_canceled) %>%\n  summarise(count = n())\n\ngrp_by_year\n\n# A tibble: 6 × 3\n# Groups:   arrival_date_year [3]\n  arrival_date_year is_canceled count\n              <dbl>       <dbl> <int>\n1              2015           0 13854\n2              2015           1  8138\n3              2016           0 36370\n4              2016           1 20337\n5              2017           0 24942\n6              2017           1 15745\n\n9) Total Number of Bookings by Cancellation Status over Years\n\n\n# Filter for canceled and not canceled bookings separately\ncanceled_bookings <- grp_by_year %>% filter(is_canceled == 1)\nnot_canceled_bookings <- grp_by_year %>% filter(is_canceled == 0)\n\n# Create line plot\nggplot() +\n  geom_line(data = canceled_bookings, aes(x = arrival_date_year, y = count, color = \"Canceled\"), size = 1) +\n  geom_line(data = not_canceled_bookings, aes(x = arrival_date_year, y = count, color = \"Not Canceled\"), size = 1) +\n  labs(\n    title = \"Total Number of Bookings by Cancellation Status over Years\",\n    x = \"Year\",\n    y = \"Total Number of Bookings\") +\n  scale_color_manual(values = c(\"red\", \"blue\"), name = \"Cancellation Status\",\n                     labels = c(\"Canceled\", \"Not Canceled\")) +\n  theme_minimal()\n\n\n\nFrom the above graph we can see that from 2015 to 2016 cancelations and not cancelations are increased and from 2016 to 2017 cancelation and not cancelations are decreased.\n10) What percentage of bookings canceled in each month ?\n\n\n# Group data by 'arrival_date_month' and 'is_canceled', then calculate the total number of bookings\ntotal_bookings <- hotel_clean_data %>%\n  group_by(arrival_date_month) %>%\n  summarise(total = n())\n\n# Group data by 'arrival_date_month' and 'is_canceled', then calculate the number of canceled bookings\ncanceled_bookings <- hotel_clean_data %>%\n  filter(is_canceled == 1) %>%\n  group_by(arrival_date_month) %>%\n  summarise(canceled_total = n())\n\n# Merge total and canceled bookings dataframes\nmerged_data <- merge(total_bookings, canceled_bookings, by = \"arrival_date_month\", all.x = TRUE)\n\n# Calculate the percentage of canceled bookings\nmerged_data$percentage_canceled <- (merged_data$canceled_total / merged_data$total) * 100\n\n# Print the resulting dataframe\nprint(merged_data)\n\n   arrival_date_month total canceled_total percentage_canceled\n1               April 11089           4524            40.79719\n2              August 13873           5235            37.73517\n3            December  6780           2371            34.97050\n4            February  8068           2696            33.41596\n5             January  5929           1807            30.47731\n6                July 12661           4742            37.45360\n7                June 10939           4535            41.45717\n8               March  9794           3149            32.15234\n9                 May 11791           4677            39.66585\n10           November  6794           2122            31.23344\n11            October 11160           4246            38.04659\n12          September 10508           4116            39.17016\n\n11) Percentage of Bookings Canceled over Month\n\n\n# Convert 'arrival_date_month' to factor with correct order\nmerged_data$arrival_date_month <- factor(merged_data$arrival_date_month, \n                                         levels = c(\"January\", \"February\", \"March\", \"April\",  \"May\",\"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"))\n\n# Create a ggplot object\nggplot(merged_data, aes(x = arrival_date_month, y = percentage_canceled, group = 1)) +\n  geom_line(color = \"blue\") +\n  geom_point(color = \"blue\", size = 3) +\n  labs(\n    title = \"Percentage of Bookings Canceled over Month \",\n    x = \"Month\",\n    y = \"Percentage Canceled\") +\n  scale_y_continuous(labels = scales::percent_format(scale = 1, accuracy = 1)) +\n  theme_minimal()+\n  theme(axis.text.x = element_text(angle = 45, vjust = 0.5, hjust = 1))\n\n\n\n12) What are the types of rooms that were booked by customers and subsequently canceled?\n\n\ngrp_by_roomtype <- hotel_clean_data %>%\n  group_by(reserved_room_type,is_canceled) %>%\n  summarise(count = n())\n\ngrp_by_roomtype\n\n# A tibble: 19 × 3\n# Groups:   reserved_room_type [10]\n   reserved_room_type is_canceled count\n   <chr>                    <dbl> <int>\n 1 A                            0 52364\n 2 A                            1 33630\n 3 B                            0   750\n 4 B                            1   364\n 5 C                            0   624\n 6 C                            1   308\n 7 D                            0 13099\n 8 D                            1  6102\n 9 E                            0  4621\n10 E                            1  1914\n11 F                            0  2017\n12 F                            1   880\n13 G                            0  1331\n14 G                            1   763\n15 H                            0   356\n16 H                            1   245\n17 L                            0     4\n18 L                            1     2\n19 P                            1    12\n\n13) Number of Bookings by Reserved Room Type and Cancellation Status\n\n\nggplot(grp_by_roomtype, aes(x = reserved_room_type, y = count, fill = factor(is_canceled))) +\n  geom_bar(stat = \"identity\", position = \"dodge\") +\n  labs(title = \"Number of Bookings by Reserved Room Type and Cancellation Status\",\n       x = \"Reserved Room Type\",\n       y = \"Number of Bookings\",\n       fill = \"Cancellation Status\") +\n  scale_fill_manual(values = c(\"Not Canceled\" = \"skyblue\", \"Canceled\" = \"salmon\")) +\n  facet_grid(. ~ factor(is_canceled)) +  \n  theme_minimal() +\n  theme(axis.text.x = element_text(angle = 45, hjust = 1)) \n\n\n\nDropping Unwanted columns\n\n\ndf <- hotel_clean_data %>%\n  select(\n    -arrival_date_year,\n    -arrival_date_month,\n    -children,\n    -babies,\n    -meal,\n    -country,\n    -market_segment,\n    -distribution_channel,\n    -agent,\n    -company,\n    -reservation_status,\n    -required_car_parking_spaces,\n    -reservation_status_date,\n    -assigned_room_type\n  )\n\n\nCorrelation Matrix\n\n\n# Filter numeric columns\ndf_numeric <- df[, sapply(df, is.numeric)]\n\n# Compute correlation matrix\ncorrelation_matrix <- cor(df_numeric, use = \"pairwise.complete.obs\")\n\nprint(correlation_matrix)\n\n                                is_canceled     lead_time\nis_canceled                     1.000000000  0.2931773844\nlead_time                       0.293177384  1.0000000000\narrival_date_week_number        0.008131991  0.1268848204\narrival_date_day_of_month      -0.006084131  0.0022337238\nstays_in_weekend_nights        -0.001783382  0.0856671122\nstays_in_week_nights            0.024771434  0.1657994743\nadults                          0.059990266  0.1195443171\nis_repeated_guest              -0.084787949 -0.1244175906\nprevious_cancellations          0.110140471  0.0860398385\nprevious_bookings_not_canceled -0.057355365 -0.0735521797\nbooking_changes                -0.144370572  0.0001380965\ndays_in_waiting_list            0.054193146  0.1700826037\nadr                             0.047622225 -0.0631259954\ntotal_of_special_requests      -0.234705902 -0.0956878275\n                               arrival_date_week_number\nis_canceled                                 0.008131991\nlead_time                                   0.126884820\narrival_date_week_number                    1.000000000\narrival_date_day_of_month                   0.066823684\nstays_in_weekend_nights                     0.018209372\nstays_in_week_nights                        0.015559322\nadults                                      0.025901318\nis_repeated_guest                          -0.030128572\nprevious_cancellations                      0.035502291\nprevious_bookings_not_canceled             -0.020902457\nbooking_changes                             0.005511772\ndays_in_waiting_list                        0.022934739\nadr                                         0.075811103\ntotal_of_special_requests                   0.026139352\n                               arrival_date_day_of_month\nis_canceled                                -0.0060841312\nlead_time                                   0.0022337238\narrival_date_week_number                    0.0668236844\narrival_date_day_of_month                   1.0000000000\nstays_in_weekend_nights                    -0.0163702417\nstays_in_week_nights                       -0.0281924631\nadults                                     -0.0015394616\nis_repeated_guest                          -0.0061516010\nprevious_cancellations                     -0.0270150357\nprevious_bookings_not_canceled             -0.0003030418\nbooking_changes                             0.0106010824\ndays_in_waiting_list                        0.0227233609\nadr                                         0.0301886003\ntotal_of_special_requests                   0.0030944208\n                               stays_in_weekend_nights\nis_canceled                               -0.001783382\nlead_time                                  0.085667112\narrival_date_week_number                   0.018209372\narrival_date_day_of_month                 -0.016370242\nstays_in_weekend_nights                    1.000000000\nstays_in_week_nights                       0.498967239\nadults                                     0.091888610\nis_repeated_guest                         -0.087241563\nprevious_cancellations                    -0.012775390\nprevious_bookings_not_canceled            -0.042716302\nbooking_changes                            0.063280182\ndays_in_waiting_list                      -0.054152569\nadr                                        0.049323279\ntotal_of_special_requests                  0.072685999\n                               stays_in_week_nights       adults\nis_canceled                             0.024771434  0.059990266\nlead_time                               0.165799474  0.119544317\narrival_date_week_number                0.015559322  0.025901318\narrival_date_day_of_month              -0.028192463 -0.001539462\nstays_in_weekend_nights                 0.498967239  0.091888610\nstays_in_week_nights                    1.000000000  0.092983373\nadults                                  0.092983373  1.000000000\nis_repeated_guest                      -0.097247278 -0.146424566\nprevious_cancellations                 -0.013993096 -0.006735864\nprevious_bookings_not_canceled         -0.048743688 -0.107982949\nbooking_changes                         0.096209580 -0.051666039\ndays_in_waiting_list                   -0.002020421 -0.008280488\nadr                                     0.065219447  0.230690021\ntotal_of_special_requests               0.068199125  0.122854601\n                               is_repeated_guest\nis_canceled                         -0.084787949\nlead_time                           -0.124417591\narrival_date_week_number            -0.030128572\narrival_date_day_of_month           -0.006151601\nstays_in_weekend_nights             -0.087241563\nstays_in_week_nights                -0.097247278\nadults                              -0.146424566\nis_repeated_guest                    1.000000000\nprevious_cancellations               0.082292667\nprevious_bookings_not_canceled       0.418055728\nbooking_changes                      0.012089755\ndays_in_waiting_list                -0.022235787\nadr                                 -0.134328457\ntotal_of_special_requests            0.013055449\n                               previous_cancellations\nis_canceled                               0.110140471\nlead_time                                 0.086039838\narrival_date_week_number                  0.035502291\narrival_date_day_of_month                -0.027015036\nstays_in_weekend_nights                  -0.012775390\nstays_in_week_nights                     -0.013993096\nadults                                   -0.006735864\nis_repeated_guest                         0.082292667\nprevious_cancellations                    1.000000000\nprevious_bookings_not_canceled            0.152727847\nbooking_changes                          -0.026993891\ndays_in_waiting_list                      0.005928488\nadr                                      -0.065653153\ntotal_of_special_requests                -0.048382004\n                               previous_bookings_not_canceled\nis_canceled                                     -0.0573553652\nlead_time                                       -0.0735521797\narrival_date_week_number                        -0.0209024574\narrival_date_day_of_month                       -0.0003030418\nstays_in_weekend_nights                         -0.0427163025\nstays_in_week_nights                            -0.0487436875\nadults                                          -0.1079829493\nis_repeated_guest                                0.4180557276\nprevious_cancellations                           0.1527278470\nprevious_bookings_not_canceled                   1.0000000000\nbooking_changes                                  0.0116065130\ndays_in_waiting_list                            -0.0093973866\nadr                                             -0.0721514059\ntotal_of_special_requests                        0.0378270602\n                               booking_changes days_in_waiting_list\nis_canceled                      -0.1443705725          0.054193146\nlead_time                         0.0001380965          0.170082604\narrival_date_week_number          0.0055117720          0.022934739\narrival_date_day_of_month         0.0106010824          0.022723361\nstays_in_weekend_nights           0.0632801821         -0.054152569\nstays_in_week_nights              0.0962095799         -0.002020421\nadults                           -0.0516660388         -0.008280488\nis_repeated_guest                 0.0120897552         -0.022235787\nprevious_cancellations           -0.0269938913          0.005928488\nprevious_bookings_not_canceled    0.0116065130         -0.009397387\nbooking_changes                   1.0000000000         -0.011635469\ndays_in_waiting_list             -0.0116354687          1.000000000\nadr                               0.0196022487         -0.040764331\ntotal_of_special_requests         0.0528441726         -0.082727388\n                                       adr total_of_special_requests\nis_canceled                     0.04762222              -0.234705902\nlead_time                      -0.06312600              -0.095687827\narrival_date_week_number        0.07581110               0.026139352\narrival_date_day_of_month       0.03018860               0.003094421\nstays_in_weekend_nights         0.04932328               0.072685999\nstays_in_week_nights            0.06521945               0.068199125\nadults                          0.23069002               0.122854601\nis_repeated_guest              -0.13432846               0.013055449\nprevious_cancellations         -0.06565315              -0.048382004\nprevious_bookings_not_canceled -0.07215141               0.037827060\nbooking_changes                 0.01960225               0.052844173\ndays_in_waiting_list           -0.04076433              -0.082727388\nadr                             1.00000000               0.172238374\ntotal_of_special_requests       0.17223837               1.000000000\n\nHeatMap\n\n\n# Plot heatmap\ncorrplot(correlation_matrix, method = \"color\", type = \"upper\", \n         tl.col = \"black\", tl.srt = 45, tl.cex = 0.7, addCoef.col = \"black\", \n         number.cex = 0.7, col = colorRampPalette(c(\"white\", \"red\"))(100),\n         title = \"Correlation Heatmap\")\n\n\n\nLogistic Regression Model\n\n\n# Convert 'is_canceled' to a factor\ndf$is_canceled <- as.factor(df$is_canceled)\n\n# Set seed for reproducibility\nset.seed(100)\n\n# Create data partition\ntest_index <- createDataPartition(y = df$is_canceled, times = 1, p = 0.3, list = FALSE)\n\n# Create training dataset\ndf_train <- df[-test_index,]\n\n# Create validation dataset\ndf_validation <- df[test_index,]\n\n# Check dimensions of training dataset\ndim(df_train)\n\n[1] 83570    18\n\n\n\n# Train logistic regression model\nlr_model <- glm(is_canceled ~ ., data = df_train, family = binomial)\n\nsummary (lr_model)\n\n\nCall:\nglm(formula = is_canceled ~ ., family = binomial, data = df_train)\n\nCoefficients:\n                                 Estimate Std. Error z value Pr(>|z|)\n(Intercept)                    -2.7555690  0.0777299 -35.451  < 2e-16\nhotelResort Hotel              -0.2546631  0.0209558 -12.152  < 2e-16\nlead_time                       0.0039482  0.0001033  38.237  < 2e-16\narrival_date_week_number       -0.0033807  0.0006896  -4.903 9.46e-07\narrival_date_day_of_month      -0.0006913  0.0010019  -0.690 0.490197\nstays_in_weekend_nights         0.0451305  0.0101439   4.449 8.63e-06\nstays_in_week_nights            0.0524144  0.0053624   9.775  < 2e-16\nadults                          0.1068541  0.0177941   6.005 1.91e-09\nis_repeated_guest              -0.8582682  0.0936624  -9.163  < 2e-16\nprevious_cancellations          2.8795361  0.0714289  40.313  < 2e-16\nprevious_bookings_not_canceled -0.5893401  0.0309331 -19.052  < 2e-16\nreserved_room_typeB             0.3036715  0.0861324   3.526 0.000422\nreserved_room_typeC             0.1440588  0.0913044   1.578 0.114615\nreserved_room_typeD            -0.0310623  0.0243225  -1.277 0.201566\nreserved_room_typeE            -0.1183839  0.0396229  -2.988 0.002810\nreserved_room_typeF            -0.3155814  0.0563701  -5.598 2.16e-08\nreserved_room_typeG            -0.0982406  0.0643659  -1.526 0.126940\nreserved_room_typeH            -0.1246636  0.1125049  -1.108 0.267830\nreserved_room_typeL            -0.6670703  1.1794835  -0.566 0.571692\nreserved_room_typeP            12.6535818 46.6935884   0.271 0.786397\nbooking_changes                -0.4397299  0.0179025 -24.562  < 2e-16\ndeposit_typeNon Refund          5.0811863  0.1351512  37.596  < 2e-16\ndeposit_typeRefundable          0.1684486  0.2337678   0.721 0.471167\ndays_in_waiting_list           -0.0014241  0.0005589  -2.548 0.010826\ncustomer_typeGroup             -0.0999674  0.2160062  -0.463 0.643509\ncustomer_typeTransient          1.2820538  0.0634543  20.204  < 2e-16\ncustomer_typeTransient-Party    0.4245544  0.0661749   6.416 1.40e-10\nadr                             0.0055939  0.0002156  25.945  < 2e-16\ntotal_of_special_requests      -0.5317028  0.0124191 -42.813  < 2e-16\n                                  \n(Intercept)                    ***\nhotelResort Hotel              ***\nlead_time                      ***\narrival_date_week_number       ***\narrival_date_day_of_month         \nstays_in_weekend_nights        ***\nstays_in_week_nights           ***\nadults                         ***\nis_repeated_guest              ***\nprevious_cancellations         ***\nprevious_bookings_not_canceled ***\nreserved_room_typeB            ***\nreserved_room_typeC               \nreserved_room_typeD               \nreserved_room_typeE            ** \nreserved_room_typeF            ***\nreserved_room_typeG               \nreserved_room_typeH               \nreserved_room_typeL               \nreserved_room_typeP               \nbooking_changes                ***\ndeposit_typeNon Refund         ***\ndeposit_typeRefundable            \ndays_in_waiting_list           *  \ncustomer_typeGroup                \ncustomer_typeTransient         ***\ncustomer_typeTransient-Party   ***\nadr                            ***\ntotal_of_special_requests      ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\n(Dispersion parameter for binomial family taken to be 1)\n\n    Null deviance: 110173  on 83569  degrees of freedom\nResidual deviance:  78181  on 83541  degrees of freedom\nAIC: 78239\n\nNumber of Fisher Scoring iterations: 9\n\n\n\n# Make predictions on the validation dataset\nlr_pred <- predict(lr_model, newdata = df_validation, type = \"response\")\n\n# Convert predicted probabilities to binary predictions\nlr_pred <- ifelse(lr_pred > 0.5, 1, 0)\n\ntable(df_validation$is_canceled==lr_pred)\n\n\nFALSE  TRUE \n 7699 28117 \n\n# Print accuracy\naccuracy <- sum(lr_pred == df_validation$is_canceled) / nrow(df_validation)\nprint(paste(\"Accuracy:\\n\", accuracy))\n\n[1] \"Accuracy:\\n 0.785040205494751\"\n\nPerformance Accuracy of the Logistic Model is 78 %\n\n\n\n",
      "last_modified": "2024-04-21T15:27:13-04:00"
    }
  ],
  "collections": []
}
